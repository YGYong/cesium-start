# ğŸŒŒ Cesium ä¸­çš„ JulianDateï¼ˆå„’ç•¥æ—¥æœŸï¼‰è¯¦è§£

## ä»€ä¹ˆæ˜¯å„’ç•¥æ—¥æœŸï¼Ÿ

JulianDateï¼ˆå„’ç•¥æ—¥æœŸï¼‰ æ˜¯å¤©æ–‡å­¦å’Œèˆªå¤©é¢†åŸŸä¸­å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§è¿ç»­æ—¶é—´è¡¨ç¤ºæ³•ã€‚å®ƒè¡¨ç¤ºä»å…¬å…ƒå‰ 4713 å¹´ 1 æœˆ 1 æ—¥ä¸­åˆ 12 æ—¶ï¼ˆä¸–ç•Œæ—¶ï¼‰å¼€å§‹è¿ç»­è®¡ç®—çš„å¤©æ•°ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦ JulianDateï¼Ÿ

1. æ—¶é—´è¿ç»­æ€§ï¼šæ²¡æœ‰æ—¥æœŸä¸­æ–­ï¼ˆå¦‚é—°å¹´ã€é—°ç§’é—®é¢˜ï¼‰

2. é«˜ç²¾åº¦è®¡ç®—ï¼šæ”¯æŒæ¯«ç§’çº§ç”šè‡³å¾®ç§’çº§æ—¶é—´ç²¾åº¦

3. è·¨å¹³å°å…¼å®¹ï¼šé¿å…æ—¶åŒºå’Œæ—¥å†ç³»ç»Ÿçš„å·®å¼‚

4. ç§‘å­¦è®¡ç®—æ ‡å‡†ï¼šèˆªå¤©ã€å¤©æ–‡é¢†åŸŸçš„é€šç”¨æ—¶é—´è¡¨ç¤º

## JulianDate çš„ç»“æ„

```js
{
  day: 2460830,      // æ•´æ•°éƒ¨åˆ† - ä»å„’ç•¥æ—¥èµ·å§‹æ—¥ç®—èµ·çš„å¤©æ•°
  secondsOfDay: 43200 // å°æ•°éƒ¨åˆ† - å½“å¤©å·²è¿‡å»çš„ç§’æ•°ï¼ˆ0-86400ï¼‰
}
```

## JulianDate ä¸å¸¸è§„æ—¥æœŸçš„è½¬æ¢

### JulianDate ä¸åŒ—äº¬æ—¶é—´

JulianDate æ¯”åŒ—äº¬æ—¶é—´æ™š 8 ä¸ªå°æ—¶, åŠ ä¸Šä¸œ 8 æ—¶ï¼Œå°±æ˜¯å½“å‰çš„çœŸæ­£æ—¶é—´

```js
// åˆ›å»ºå½“å‰æ—¶é—´å¯¹åº”çš„ JulianDate
const julianDate = Cesium.JulianDate.fromDate(new Date());
// å°† JulianDate è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´
const beijingDate = Cesium.JulianDate.addHours(
  julianDate,
  8,
  new Cesium.JulianDate()
);
```

### å¸¸è§„æ—¥æœŸ â†’ JulianDate

```js
// åˆ›å»ºå½“å‰æ—¶é—´å¯¹åº”çš„ JulianDate
const julianDate = Cesium.JulianDate.fromDate(new Date());
// ä¸Šé¢ä»£ç ç­‰åŒäº
const julianDate = Cesium.JulianDate.now();

// ä» ISO 8601 å­—ç¬¦ä¸²åˆ›å»º
const isoDate = "2025-06-04T12:00:00Z";
const julianDate = Cesium.JulianDate.fromIso8601(isoDate);
```

### JulianDate â†’ å¸¸è§„æ—¥æœŸ

```js
// è½¬æ¢ä¸º JavaScript Date å¯¹è±¡
const dateObj = Cesium.JulianDate.toDate(julianDate);

// è½¬æ¢ä¸º ISO 8601 å­—ç¬¦ä¸²
const isoString = Cesium.JulianDate.toIso8601(julianDate);
```

## æ—¶é—´æ“ä½œå®ç”¨å‡½æ•°

### æ—¶é—´åŠ å‡

- `addDays`ï¼šå¢åŠ å¤©æ•°
- `addHours`ï¼šå¢åŠ å°æ—¶æ•°
- `addMinutes`ï¼šå¢åŠ åˆ†é’Ÿæ•°
- `addSeconds`ï¼šå¢åŠ ç§’æ•°
- ä»¥ä¸Šä½¿ç”¨æ–¹æ³•åŒç†ï¼Œç¤ºä¾‹ï¼š

```js
Cesium.JulianDate.addHours(
  new Cesium.JulianDate.now(),
  1, // å¢åŠ 1å°æ—¶,å‡å°‘çš„è¯ä¼ å…¥è´Ÿæ•°å³å¯
  new Cesium.JulianDate()
);
```

## Cesium ä¸­çš„æ—¶é’Ÿ Clock

`Clock` æ˜¯ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºæ§åˆ¶åœºæ™¯çš„æ—¶é—´åŠ¨æ€ï¼Œç®¡ç†æ—¶é—´æµé€ã€åŠ¨ç”»æ’­æ”¾ã€æ—¶é—´èŒƒå›´ç­‰

### å±æ€§

| å±æ€§          | ç±»å‹       | è¯´æ˜                                                                            |
| ------------- | ---------- | ------------------------------------------------------------------------------- |
| currentTime   | JulianDate | å½“å‰åœºæ™¯æ—¶é—´ï¼ˆå¯è¯»å†™ï¼‰                                                          |
| startTime     | JulianDate | æ—¶é—´è½´èµ·å§‹æ—¶é—´                                                                  |
| stopTime      | JulianDate | æ—¶é—´è½´ç»“æŸæ—¶é—´                                                                  |
| multiplier    | Number     | æ—¶é—´æµé€å€ç‡ï¼ˆæ­£=æ­£å‘æ’­æ”¾ï¼Œè´Ÿ=å€’æ”¾ï¼‰                                            |
| clockStep     | ClockStep  | åˆ¤æ–­å¯¹ Clock#tick çš„è°ƒç”¨æ˜¯å¦ä¾èµ–äºå¸§æˆ–ç³»ç»Ÿæ—¶é’Ÿã€‚                                |
| clockRange    | ClockRange | åˆ°è¾¾æ—¶é—´è¾¹ç•Œçš„è¡Œä¸ºï¼šUNBOUNDEDï¼šä¸åœæ­¢ï¼ŒCLAMPEDï¼šåœæ­¢åœ¨è¾¹ç•Œï¼ŒLOOP_STOPï¼šå¾ªç¯æ’­æ”¾ |
| shouldAnimate | Boolean    | æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼ˆtrue=æ’­æ”¾ï¼Œfalse=æš‚åœï¼‰                                           |

### ä½¿ç”¨ç¤ºä¾‹

```js
const clock = new Cesium.Clock({
  startTime: Cesium.JulianDate.fromIso8601("2023-01-01T00:00:00Z"),
  currentTime: Cesium.JulianDate.fromIso8601("2023-01-01T12:00:00Z"),
  stopTime: Cesium.JulianDate.fromIso8601("2023-01-02T00:00:00Z"),
  clockRange: Cesium.ClockRange.LOOP_STOP, // å¾ªç¯æ’­æ”¾
  multiplier: 2.0, // 2å€é€Ÿæ’­æ”¾
  clockStep: Cesium.ClockStep.SYSTEM_CLOCK,
});

// åœ¨ Viewer ä¸­ä½¿ç”¨
const viewer = new Cesium.Viewer("cesiumContainer", {
  clock: clock,
  shouldAnimate: true, // æ’­æ”¾
});
```

### åŠ¨æ€æ§åˆ¶

```js
// æš‚åœ/æ’­æ”¾
viewer.clock.shouldAnimate = false; // æš‚åœ

// è°ƒæ•´é€Ÿåº¦
viewer.clock.multiplier = -1.0; // å€’æ”¾

// è·³è½¬åˆ°ç‰¹å®šæ—¶é—´
viewer.clock.currentTime = Cesium.JulianDate.fromIso8601(
  "2023-01-01T18:00:00Z"
);
```
